<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MBTI 간이 검사</title>
  <meta name="description" content="간단한 MBTI 성향 검사 페이지 (비로그인·비저장)" />
  <style>
    :root{
      --bg:#0f172a;--card:#111827;--muted:#94a3b8;--text:#e5e7eb;--accent:#60a5fa;--accent-2:#34d399;--warn:#f59e0b;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0b1020, #0f172a 40%);font-family:system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, Apple SD Gothic Neo, sans-serif;color:var(--text);line-height:1.55}
    .wrap{max-width:920px;margin:0 auto;padding:24px}
    header{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;margin-bottom:16px}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:40px;height:40px;border-radius:10px;background:radial-gradient(circle at 30% 30%, var(--accent), #3b82f6 50%, transparent 51%), radial-gradient(circle at 70% 70%, var(--accent-2), #10b981 52%, transparent 53%);box-shadow:0 8px 20px rgba(16,185,129,.3), inset 0 0 30px rgba(59,130,246,.35)}
    h1{font-size:1.15rem;margin:0}
    .card{background:rgba(17,24,39,.75);backdrop-filter: blur(6px);border:1px solid rgba(148,163,184,.15);border-radius:16px;padding:22px}
    .hero{display:grid;grid-template-columns:1.2fr .8fr;gap:20px}
    .hero .title{font-size:1.8rem;margin-top:0;margin-bottom:10px}
    .muted{color:var(--muted)}
    .btn{appearance:none;border:0;cursor:pointer;border-radius:12px;padding:12px 16px;font-weight:700}
    .btn-primary{background:linear-gradient(90deg,#3b82f6,#60a5fa);color:white;box-shadow:0 8px 24px rgba(59,130,246,.35)}
    .btn-ghost{background:transparent;border:1px solid rgba(148,163,184,.25);color:var(--text)}
    .btn:disabled{opacity:.55;cursor:not-allowed}
    .grid{display:grid;gap:16px}
    .q{background:#0b1222;border:1px solid rgba(148,163,184,.15);padding:16px;border-radius:12px}
    .q h3{font-size:1rem;margin:0 0 10px}
    .opt{display:flex;gap:10px;align-items:center;margin:6px 0;padding:8px;border-radius:10px;border:1px dashed transparent}
    .opt input{accent-color:#60a5fa;transform:scale(1.15)}
    .opt:hover{background:#0d1427;border-color:rgba(148,163,184,.25)}
    .controls{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-top:14px;flex-wrap:wrap}
    .progress{height:10px;background:#0b1222;border-radius:999px;overflow:hidden;border:1px solid rgba(148,163,184,.2)}
    .bar{height:100%;width:0;background:linear-gradient(90deg,#34d399,#60a5fa);transition:width .3s ease}
    .pill{display:inline-block;font-size:.85rem;color:#0b1222;background:linear-gradient(90deg,#34d399,#60a5fa);padding:6px 10px;border-radius:999px;font-weight:800}
    footer{margin:28px 0 8px;color:#708090;font-size:.9rem;text-align:center}
    .two-col{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    @media (max-width:840px){
      .hero{grid-template-columns:1fr}
      .two-col{grid-template-columns:1fr}
    }
    .result-box{display:grid;gap:14px}
    .type-badge{font-size:2.2rem;font-weight:900;letter-spacing:.02em;background:linear-gradient(90deg,#93c5fd,#a7f3d0);-webkit-background-clip:text;background-clip:text;color:transparent}
    .desc{white-space:pre-wrap}
    .share{display:flex;gap:10px;flex-wrap:wrap}
    a.link{color:#93c5fd;text-decoration:none;border-bottom:1px dashed #93c5fd}
    .note{font-size:.92rem;color:#9aa5b1}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <h1>MBTI 간이 검사</h1>
      </div>
      <div class="pill" id="stagePill">시작 전</div>
    </header>

    <!-- HERO / START -->
    <section id="start" class="card hero">
      <div>
        <h2 class="title">나의 성향, 3분 만에 가볍게 확인해요</h2>
        <p class="muted">
          아래 ‘검사 시작’ 버튼을 누르면 20문항이 차례로 나타납니다. 각 문항은 <b>A/B</b> 중 하나를 고르는 형식이며,
          진행 상황은 상단 진행바로 확인할 수 있어요. 모든 데이터는 브라우저에만 머물고 어디에도 전송되지 않습니다.
        </p>
        <div style="display:flex;gap:10px;margin-top:10px">
          <button class="btn btn-primary" id="btnStart">검사 시작</button>
          <button class="btn btn-ghost" id="btnHow">검사 방법</button>
        </div>
      </div>
      <div class="card" style="background:#0b1222">
        <div class="grid">
          <div><span class="muted">구성</span><br/><strong>EI·SN·TF·JP</strong> 각 5문항, 총 20문항</div>
          <div><span class="muted">소요시간</span><br/>약 3분</div>
          <div><span class="muted">저장</span><br/>개인정보 저장 없음</div>
          <div><span class="muted">목적</span><br/>자기이해를 돕는 간이 지표</div>
        </div>
      </div>
    </section>

    <!-- HOW -->
    <section id="how" class="card" style="display:none">
      <h2 style="margin-top:0">검사 방법</h2>
      <ol>
        <li>각 문항에서 <b>더 나와 가까운 선택지</b>를 고릅니다.</li>
        <li>정답은 없어요. 빠르게, 처음 든 생각을 선택해 주세요.</li>
        <li>모든 문항을 마치면 16유형 중 하나로 결과가 제시됩니다.</li>
      </ol>
      <div class="controls">
        <span class="note">* 본 검사는 공식 MBTI®가 아닌 비공식 간이 버전입니다.</span>
        <button class="btn btn-primary" id="btnHowClose">닫기</button>
      </div>
    </section>

    <!-- TEST -->
    <section id="test" class="card" style="display:none">
      <div class="two-col" style="align-items:center">
        <div>
          <h2 id="qTitle" style="margin:0 0 6px">문항 1</h2>
          <div class="muted" id="qDim">차원</div>
        </div>
        <div class="progress" aria-label="진행률">
          <div class="bar" id="prog"></div>
        </div>
      </div>
      <div id="qBox" class="q">
        <!-- question + options will be injected -->
      </div>
      <div class="controls">
        <div style="display:flex;gap:8px;align-items:center">
          <button class="btn btn-ghost" id="btnPrev">이전</button>
          <button class="btn btn-ghost" id="btnClear">선택 해제</button>
        </div>
        <div style="display:flex;gap:8px">
          <button class="btn btn-primary" id="btnNext">다음</button>
          <button class="btn" id="btnSubmit" disabled>결과 보기</button>
        </div>
      </div>
    </section>

    <!-- RESULT -->
    <section id="result" class="card" style="display:none">
      <div class="result-box">
        <div class="type-badge" id="typeBadge">INTJ</div>
        <div class="grid" style="gap:10px">
          <div><span class="muted">요약</span><div id="typeName" style="font-weight:700;margin-top:4px">전략가</div></div>
          <div><span class="muted">비율</span><div id="ratios" style="margin-top:4px"></div></div>
        </div>
        <div class="desc" id="typeDesc"></div>
        <div class="share">
          <button class="btn btn-primary" id="btnRetry">다시 검사</button>
          <button class="btn btn-ghost" id="btnCopy">결과 복사</button>
          <a class="link" href="#start" id="scrollTop">맨 위로</a>
        </div>
        <div class="note">※ 결과는 참고용이며 상황·역할에 따라 달라질 수 있습니다.</div>
      </div>
    </section>

    <footer>
      © <span id="year"></span> MBTI 간이 검사 · 브라우저 내에서만 동작합니다.
    </footer>
  </div>

  <script>
    // --------- 데이터: 20문항(각 차원 5개) ---------
    const QUESTIONS = [
      // EI
      {dim:"EI", text:"새로운 사람들과의 만남이 에너지를 준다.", A:{label:"그렇다 (E)", val:"E"}, B:{label:"아니다 (I)", val:"I"}},
      {dim:"EI", text:"생각을 말하며 정리하는 편이다.",             A:{label:"그렇다 (E)", val:"E"}, B:{label:"아니다 (I)", val:"I"}},
      {dim:"EI", text:"주말엔 약속이 있어야 신난다.",               A:{label:"그렇다 (E)", val:"E"}, B:{label:"아니다 (I)", val:"I"}},
      {dim:"EI", text:"혼자만의 시간이 꼭 필요하다.",               A:{label:"아니다 (E)", val:"E"}, B:{label:"그렇다 (I)", val:"I"}},
      {dim:"EI", text:"‘먼저 인사’가 어색하지 않다.",                A:{label:"그렇다 (E)", val:"E"}, B:{label:"아니다 (I)", val:"I"}},
      // SN
      {dim:"SN", text:"설명은 예시·사실 위주가 이해가 잘 된다.",       A:{label:"그렇다 (S)", val:"S"}, B:{label:"아니다 (N)", val:"N"}},
      {dim:"SN", text:"디테일을 꼼꼼히 체크하는 편이다.",             A:{label:"그렇다 (S)", val:"S"}, B:{label:"아니다 (N)", val:"N"}},
      {dim:"SN", text:"큰 그림·가능성 얘기가 더 흥미롭다.",           A:{label:"그렇다 (N)", val:"N"}, B:{label:"아니다 (S)", val:"S"}},
      {dim:"SN", text:"규칙·절차가 있으면 마음이 편하다.",            A:{label:"그렇다 (S)", val:"S"}, B:{label:"아니다 (N)", val:"N"}},
      {dim:"SN", text:"상상하고 아이디어 내는 걸 즐긴다.",            A:{label:"그렇다 (N)", val:"N"}, B:{label:"아니다 (S)", val:"S"}},
      // TF
      {dim:"TF", text:"논리·일관성이 우선이다.",                      A:{label:"그렇다 (T)", val:"T"}, B:{label:"아니다 (F)", val:"F"}},
      {dim:"TF", text:"갈등보다 관계 유지를 우선한다.",               A:{label:"아니다 (T)", val:"T"}, B:{label:"그렇다 (F)", val:"F"}},
      {dim:"TF", text:"의사결정 때 장단점을 표로 비교한다.",           A:{label:"그렇다 (T)", val:"T"}, B:{label:"아니다 (F)", val:"F"}},
      {dim:"TF", text:"상대 감정에 쉽게 공감한다.",                    A:{label:"아니다 (T)", val:"T"}, B:{label:"그렇다 (F)", val:"F"}},
      {dim:"TF", text:"정의·원칙이 중요하다.",                        A:{label:"그렇다 (T)", val:"T"}, B:{label:"아니다 (F)", val:"F"}},
      // JP
      {dim:"JP", text:"마감 전 여유 있게 끝내야 마음이 편하다.",        A:{label:"그렇다 (J)", val:"J"}, B:{label:"아니다 (P)", val:"P"}},
      {dim:"JP", text:"계획보다 즉흥이 더 재밌다.",                    A:{label:"아니다 (J)", val:"J"}, B:{label:"그렇다 (P)", val:"P"}},
      {dim:"JP", text:"할 일 목록·캘린더를 즐겨 쓴다.",                 A:{label:"그렇다 (J)", val:"J"}, B:{label:"아니다 (P)", val:"P"}},
      {dim:"JP", text:"선택지는 열어두고 싶다.",                      A:{label:"아니다 (J)", val:"J"}, B:{label:"그렇다 (P)", val:"P"}},
      {dim:"JP", text:"정리·정돈이 스트레스 완화에 도움 된다.",         A:{label:"그렇다 (J)", val:"J"}, B:{label:"아니다 (P)", val:"P"}},
    ];

    // --------- 16유형 요약 ---------
    const TYPE_INFO = {
      "ISTJ":{name:"현실주의자",desc:"책임감·규범 중시. 체계와 신뢰를 중하게 여깁니다.\n강점: 성실·정확·신뢰성\n유의: 유연성·소통 방식"},
      "ISFJ":{name:"수호자",desc:"배려 깊고 헌신적. 안정과 조화를 추구합니다.\n강점: 성실·세심·책임\n유의: 자기돌봄"},
      "INFJ":{name:"옹호자",desc:"가치지향·통찰형. 깊이 있는 관계를 선호합니다.\n강점: 공감·비전\n유의: 과몰입"},
      "INTJ":{name:"전략가",desc:"체계적 분석과 장기전략 수립에 강합니다.\n강점: 통찰·기획\n유의: 감정 고려"},
      "ISTP":{name:"장인",desc:"문제해결·도구활용에 능숙. 실용을 중시합니다.\n강점: 침착·분석\n유의: 소통"},
      "ISFP":{name:"모험가",desc:"유연·온화, 현재의 경험과 조화를 중시합니다.\n강점: 감수성·적응\n유의: 목표관리"},
      "INFP":{name:"중재자",desc:"가치지향·상상력 풍부. 의미를 추구합니다.\n강점: 공감·창의\n유의: 실행력"},
      "INTP":{name:"논리술사",desc:"개념탐구·원리분석을 즐깁니다.\n강점: 분석·아이디어\n유의: 마감관리"},
      "ESTP":{name:"기업가",desc:"현장감각·결단 빠름. 도전적입니다.\n강점: 실행·적응\n유의: 장기계획"},
      "ESFP":{name:"연예인",desc:"에너지·사교성 풍부. 즐거움을 만듭니다.\n강점: 협업·현장감\n유의: 계획성"},
      "ENFP":{name:"활동가",desc:"열정적 아이디어러. 영감 주는 동료입니다.\n강점: 창의·소통\n유의: 우선순위"},
      "ENTP":{name:"변론가",desc:"토론·혁신 선호. 새로움에 강합니다.\n강점: 발상·기민함\n유의: 지속 실행"},
      "ESTJ":{name:"경영자",desc:"조직·성과 지향. 구조화에 능합니다.\n강점: 추진·관리\n유의: 유연성"},
      "ESFJ":{name:"집정관",desc:"배려·조화 중시. 팀의 분위기를 살립니다.\n강점: 협업·책임\n유의: 경계설정"},
      "ENFJ":{name:"선도자",desc:"사람과 비전을 잇는 리더형.\n강점: 공감·조정\n유의: 과부담"},
      "ENTJ":{name:"통솔자",desc:"목표·전략 지향 리더. 큰그림에 강합니다.\n강점: 기획·추진\n유의: 감정 고려"},
    };

    // --------- 상태 ---------
    let idx=0;
    const answers = new Array(QUESTIONS.length).fill(null);

    // --------- DOM 참조 ---------
    const el = (id)=>document.getElementById(id);
    const startSec=el('start'), howSec=el('how'), testSec=el('test'), resultSec=el('result');
    const stagePill=el('stagePill'), qTitle=el('qTitle'), qDim=el('qDim'), qBox=el('qBox'), prog=el('prog');
    const btnStart=el('btnStart'), btnHow=el('btnHow'), btnHowClose=el('btnHowClose');
    const btnPrev=el('btnPrev'), btnNext=el('btnNext'), btnClear=el('btnClear'), btnSubmit=el('btnSubmit');
    const typeBadge=el('typeBadge'), typeName=el('typeName'), typeDesc=el('typeDesc'), ratios=el('ratios');
    const btnRetry=el('btnRetry'), btnCopy=el('btnCopy');

    document.getElementById('year').textContent = new Date().getFullYear();

    // --------- 헬퍼 ---------
    function setStage(txt){ stagePill.textContent=txt; }
    function show(sec){
      for(const s of [startSec,howSec,testSec,resultSec]) s.style.display='none';
      sec.style.display='block';
      window.scrollTo({top:0,behavior:'smooth'});
    }
    function renderQ(){
      const q = QUESTIONS[idx];
      qTitle.textContent = `문항 ${idx+1} / ${QUESTIONS.length}`;
      qDim.textContent = dimKorean(q.dim);
      prog.style.width = `${((idx)/QUESTIONS.length)*100}%`;
      const name = `q_${idx}`;
      const saved = answers[idx];

      qBox.innerHTML = `
        <h3>${q.text}</h3>
        <label class="opt">
          <input type="radio" name="${name}" value="A" ${saved==='A'?'checked':''}/>
          <span>${q.A.label}</span>
        </label>
        <label class="opt">
          <input type="radio" name="${name}" value="B" ${saved==='B'?'checked':''}/>
          <span>${q.B.label}</span>
        </label>
      `;

      qBox.querySelectorAll('input[name="'+name+'"]').forEach(inp=>{
        inp.addEventListener('change', e=>{
          answers[idx] = e.target.value;
          updateSubmit();
        });
      });

      btnPrev.disabled = idx===0;
      btnNext.disabled = idx>=QUESTIONS.length-1;
      updateSubmit();
    }
    function updateSubmit(){
      const allAnswered = answers.every(v=>v!==null);
      btnSubmit.disabled = !allAnswered;
    }
    function dimKorean(dim){
      return {
        "EI":"외향(E) ↔ 내향(I)",
        "SN":"감각(S) ↔ 직관(N)",
        "TF":"사고(T) ↔ 감정(F)",
        "JP":"판단(J) ↔ 인식(P)"
      }[dim] || dim;
    }

    // --------- 결과 계산 ---------
    function compute(){
      const score = {E:0,I:0,S:0,N:0,T:0,F:0,J:0,P:0};
      QUESTIONS.forEach((q,i)=>{
        const pick = answers[i]; if(!pick) return;
        const letter = q[pick].val;
        score[letter]++;
      });
      const type =
        (score.E>=score.I?'E':'I')+
        (score.S>=score.N?'S':'N')+
        (score.T>=score.F?'T':'F')+
        (score.J>=score.P?'J':'P');

      const ratioTxt = (a,b,la,lb)=>{
        const total = score[la]+score[lb];
        const pa = Math.round((score[la]/(total||1))*100);
        const pb = 100-pa;
        return `${a} ${pa}% / ${b} ${pb}%`;
      };

      const lines = [
        ratioTxt('E','I','E','I'),
        ratioTxt('S','N','S','N'),
        ratioTxt('T','F','T','F'),
        ratioTxt('J','P','J','P')
      ].join(' · ');

      const info = TYPE_INFO[type] || {name:"간이 결과",desc:"유형 설명을 준비 중입니다."};
      return {type, info, lines};
    }

    // --------- 이벤트 바인딩 ---------
    btnStart.addEventListener('click', ()=>{
      setStage('검사 진행 중');
      show(testSec);
      idx=0;
      answers.fill(null);
      renderQ();
    });
    btnHow.addEventListener('click', ()=> show(howSec));
    btnHowClose.addEventListener('click', ()=> show(startSec));

    btnPrev.addEventListener('click', ()=>{ if(idx>0){ idx--; renderQ(); }});
    btnNext.addEventListener('click', ()=>{ if(idx<QUESTIONS.length-1){ idx++; renderQ(); }});
    btnClear.addEventListener('click', ()=>{ answers[idx]=null; renderQ(); });

    btnSubmit.addEventListener('click', ()=>{
      const r = compute();
      typeBadge.textContent = r.type;
      typeName.textContent = r.info.name;
      typeDesc.textContent = r.info.desc;
      ratios.textContent = r.lines;
      setStage('결과');
      prog.style.width = '100%';
      show(resultSec);
    });

    btnRetry.addEventListener('click', ()=>{
      answers.fill(null); idx=0; setStage('검사 진행 중'); show(testSec); renderQ();
    });

    btnCopy.addEventListener('click', async ()=>{
      const r = compute();
      const text = `MBTI 간이 검사 결과\n유형: ${r.type} - ${r.info.name}\n비율: ${r.lines}\n요약: ${r.info.desc}`;
      try{
        await navigator.clipboard.writeText(text);
        btnCopy.textContent='복사됨!';
        setTimeout(()=>btnCopy.textContent='결과 복사',1200);
      }catch(e){
        alert('복사 실패: '+e.message);
      }
    });

    // 초기
    setStage('시작 전');
  </script>
</body>
</html>
